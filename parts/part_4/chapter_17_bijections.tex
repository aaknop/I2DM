\chapter{Bijections, Surjections, and Injections}
\label{chapter:bijections-surjections-injections}
\marginurl{%
  Bijections, Surjections, and Injections:\\\noindent
  Introduction to Combinatorics \#1
}{youtu.be/fW5Zxg0TMDc}

Combinatorics is an area of mathematics primarily concerned with counting;
hence, the questions studied in combinatorics are usually formulated as results
about the sizes of sets. This chapter uses informal notion of size of a set, for
the formal definition see \Cref{chapter:cardinality}.
\section{Bijections}
The simplest way to explain that one set has the same number of elements as
another is to show a correspondence between elements of these sets. For example,
in order to explain that the set $\set{0, \pi, 1 / 4}$ has the same number of
elements as $\set{1, 2, 3}$ we may just say that $0$ corresponds to $1$,
$\pi$ corresponds to $2$, and $1 / 4$ corresponds to $3$. More formally such a
correspondence is defined using the following definition.
\begin{definition}
    Let $f : X \to Y$ be a function. We say that $f$ is a bijection iff the
    following properties are satisfied.
    \begin{itemize}
        \item Every element of $Y$ is an image of some element of $X$. In other
            words,
            \[
                \forall y \in Y~\exists x \in X\ f(x) = y.
            \]
        \item Images of any two elements
            of $X$ are different. In other words,
            \[
                \forall x_1, x_2 \in X\ f(x_1) \neq f(x_2).
            \]
    \end{itemize}
\end{definition}

Let us consider the following example. Let $f : \mathbb{R} \to \mathbb{R}$ be a
function such that $f(x) = x + 1$; Note that it is a bijection:
\begin{itemize}
    \item For any $y \in \mathbb{R}$, $f(y - 1) = (y - 1) + 1 = y$.
    \item If $f(x_1) = f(x_2)$, then $x_1 + 1 = x_2 + 1$ i.e. $x_1 = x_2$.
\end{itemize}

\begin{exercise}
    Show that $x^3$ is a bijection.
\end{exercise}

One of the nicest properties of bijections is that composition of two bijections
is a bijection.
\begin{theorem}
\label{theorem:bijections-composition}
    Let $X$, $Y$, and $Z$ be some sets and $f : X \to Y$ and $g : Y \to Z$ be
    bijections. Then $(g \circ f) : X \to Z$ is also a bijection.
\end{theorem}
\begin{proof}
    We need to check two properties.
    \begin{itemize}
        \item Let $x_1 \neq x_2 \in X$. Note that $f(x_1) \neq f(x_2)$ since $f$
            is a bijection. Hence, $g(f(x_1)) \neq g(f(x_2))$ since $g$ is a bijection
            as well. As a result, $(g \circ f)(x_1) \neq (g \circ f)(x_2)$.
        \item Let $z \in Z$; we need to find $x \in X$ such that
            $(g \circ f)(x) = z$. Note that since $g$ is a bijection there is
            $y \in Y$ such that $g(y) = z$. Additionally, there is $x \in X$ such
            that $f(x) = y$ since $f$ is a bijection. Thus,
            $(g \circ f)(x) = g(f(x)) = z$.
    \end{itemize}
\end{proof}

Another important property of bijections is that they can be inverted.
\begin{theorem}
\label{theorem:inverse-of-bijections}
    Let $f : X \to Y$ be a function. $f$ is invertible (i.e. there is a function
    $g : Y \to X$ such that $(f \circ g)(y) = y$ and $(g \circ f)(x) = x$ for all
    $x \in X$ and $y \in Y$) iff $f$ is a bijection.
\end{theorem}
\begin{proof}
    \begin{description}
        \item[$\Rightarrow$] Let's assume that $f$ is invertible. We need to prove
            that $f$ is a bijection.
            \begin{itemize}
                \item Let's assume that $f$ does not satisfy the first property in the
                    definitions of bijections i.e. there are
                    $x_1, x_2 \in X$ such that $f(x_1) = f(x_2)$ but
                    $x_1 = g(f(x_1)) = g(f(x_2)) = x_2$, which is a
                    contradiction.
                \item Let $y \in Y$. Note that $f(g(y)) = y$, hence,
                    $\Im f = Y$.
            \end{itemize}

        \item[$\Leftarrow$] Let's assume that $f$ is bijective. We need to define a
            function $g : Y \to X$ which is an inverse of $f$. Let $y \in Y$, note
            that there is a unique $x$ such that $f(x) = y$, we define $g(y) = x$.
            Note that $f(g(y)) = y$ for every $y$ by the construction of $g$.
            Additionally, $g(f(x)) = x$ since $f(g(f(x))) = f(x)$ and $f$ is a
            bijection.
    \end{description}
\end{proof}
\noindent We denote $g$ from this theorem as $f^{-1}$ and in case when $f$ is
not a bijection $f^{-1}(y)$ denotes the set $\set[f(x) = y]{x \in X}$.
\nomenclature[F]{$f^{-1}$}{denotes the inverse of the function $f$ (it's
defined only when $f$ is a bijection)}
\nomenclature[F]{$f^{-1}(y)$}{depend on the context if $f$ is not a bijection
it denotes the set $\set[f(x) = y]{x \in X}$ and it denotes the value of
$f^{-1}$ at $y$ if $f$ is a bijection}

Because of the following theorem, bijections are very useful in combinatorics.
\begin{theorem}
\label{theorem:bijection-to-equality}
    Let $X$ and $Y$ be two finite sets such that there is a bijection $f$ from
    $X$ to $Y$. Then $\cardinality{X} = \cardinality{Y}$.
\end{theorem}

Using this result we can make prove the following equality.
\begin{corollary}
\label{corollary:power-set-and-set-of-binary-strings}
    Let $X$ be a finite set of cardinality $n$. Then $2^X$ has the same
    cardinality as $\set{0, 1}^{\cardinality{X}}$.
\end{corollary}
\begin{proof}
  We are going to prove this statement for $X = \range{n}$ since for the full
  proof we would need a formal definition a finite set.

  Now we need to construct a bijection $g$ from $2^{\range{n}}$ to
  $\set{0, 1}^n$ such that $g(Y) = (u_1, \dots, u_n)$, where $u_i = 1$ iff $i \in Y$.
  It is clear that $g^{-1}(u_1, \dots, u_n) = \set[u_i = 1]{i \in \range{n}}$ is an
  inverse of $g$ so $g$ is indeed a bijection.
\end{proof}

\section{Surjections and Injections}

It is possible to note that the definition of the bijection consists of two part.
Both of these parts are interesting in their own regard, so they have their own
names.
\begin{definition}
    Let $f : X \to Y$ be a function.
    \begin{itemize}
        \item We say that $f$ is a surjection iff every element of $Y$ is an image
            of some element of $X$. In other words,
            \[
                \forall y \in Y~\exists x \in X\ f(x) = y.
            \]
        \item We say that $f$ is an injection iff images of any two elements
            of $X$ are different. In other words,
            \[
                \forall x_1, x_2 \in X\ f(x_1) \neq f(x_2).
            \]
    \end{itemize}
\end{definition}

\begin{remark}
    Let $f : X \to Y$ be an injection. Then $g : X \to \Im f$ such that
    $f(x) = g(x)$ is a bijection.
\end{remark}

\begin{exercise}
    Let $\R^+ = \set[x > 0]{x \in \R}$. Is $f : \R^+ \to \R^+$ such that
    $f(x) = x + 1$ a surjection/injection?
\end{exercise}

Like in the case of the bijection we may use surjections and injections to
compare sizes of sets.
\begin{theorem}
\label{theorem:injections-surjections-inequalities}
    Let $X$ and $Y$ be finite sets.
    \begin{itemize}
        \item If there is an injection from $X$ to $Y$, then $\cardinality{X}
          \le \cardinality{Y}$.
        \item If there is a surjection from $X$ to $Y$, then $\cardinality{X}
          \ge \cardinality{Y}$.
    \end{itemize}
\end{theorem}

\begin{chapterendexercises}
  \exercise Let $p$ be a polynomial of even degree. Is it possible that $p$ is a
    bijection from $\R$ to $\R$?
  \exercise[recommended] Construct a bijection from
    \[
      \set[{A, B \subseteq \range{n} \text{ and } A, B \text{ are disjoint}}]{(A, B)}.
    \]
    to $\set{0, 1, 2}^n$.
    \begin{solution}
      Let us start from an informal proof. For each $i \in \range{n}$ there are
      three ways to put or not put it into sets $A$ and $B$ such that $A \cap B
      = \emptyset$:
      \begin{enumerate}
        \item we may not put $i$ to both of them,
        \item we may put $i$ only to $A$,
        \item we may put $i$ only to $B$.
      \end{enumerate}
      Which defines a bijection from 
      $\set[{A, B \subseteq [n] \text{ and } A \cap B = \emptyset}]{(A, B)}$ to
      $\set{0, 1, 2}^n$.

      Now we are ready give a more formal construction of the bijection from
      $\set[{A, B \subseteq [n] \text{ and } A \cap B = \emptyset}]{(A, B)}$ to
      $\set{0, 1, 2}^n$.

      Consider 
      $f : \set[{A, B \subseteq [n] \text{ and } A \cap B = \emptyset}]{(A, B)} \to
        \set{0, 1, 2}^n$ such that
      $f(A, B) = (x_1, \dots, x_n)$, where
      \[
        x_i =
        \begin{cases}
          0 & \text{if } i \in A \text{ and } i \not\in B \\
          1 & \text{if } i \not\in A \text{ and } i \in B \\
          2 & \text{if } i \not\in A \text{ and } i \not\in B
        \end{cases}.
      \]
      Note that the function is well defined due to the fact that $A \cap B =
      \emptyset$.
      We need to prove now that it is a bijection. To do this we can simply
      construct the inverse function $e$; $e : \set{0, 1, 2}^n \to 
      \set[{A, B \subseteq [n] \text{ and } A \cap B = \emptyset}]{(A, B)}$ such
      that $e(x_1, \dots, x_n) = (A, B)$, where
      $A = \set[x_i = 1]{i \in \range{n}}$ and 
      $B = \set[x_i = 2]{i \in \range{n}}$.
      Obviously $e$ is the inverse of $f$, hence, $f$ is a bijection.
    \end{solution}
  \exercise[recommended] Construct a bijection from  $\range{2n}$ to 
    $\set{0, 1} \times \range{n}$.
    \begin{solution}
      Consider the function
      \[
        f(i) =
        \begin{cases}
          (0, i) & i \le n \\
          (1, i - n) & n < i \le 2n
        \end{cases}.
      \]
      Note that the function is defined correctly since the first coordinate is
      always $0$ or $1$ and the second coordinate is always from $\range{n}$ due to the
      fact that if $i \le n$, then $i \in \range{n}$ and if $i > n$, then 
      $(i - n) \in \range{n}$.
      We are going to prove now that it is a bijection.
      \begin{description}
        \item[injection:]
          Assume the opposite i.e. that there are $i_0 \neq i_1$ such that
          $f(i_0) = f(i_1)$. Without loss of generality we may assume that $i_0
          < i_1$.
          Consider three cases:
          \begin{enumerate}
            \item ($i_0, i_1 \le n$) Note that $(0, i_0) = f(i_0)$ and
              $f(i_1) = (0, i_1)$. So $i_0 = i_1$ since $f(i_0) = f(i_1)$, which
              is a contradiction.
            \item ($i_0, i_1 > n$) Note that $(1, i_0 - n) = f(i_0)$ and
              $f(i_1) = (1, i_1 - n)$. So $i_0 = i_1$ since $f(i_0) = f(i_1)$, which
              is a contradiction.
            \item ($i_0 \le n < i_1$) Note that $(0, i_0) = f(i_0)$ and
              $f(i_1) = (1, i_1 - n)$. So $0 = 1$ since $f(i_0) = f(i_1)$, which
              is a contradiction.
          \end{enumerate}
        \item[surjection:]
          Let us fix some $(a, b) \in \set{0, 1} \times \range{n}$. We need to show that
          it belongs to $\Im f$.
          \begin{enumerate}
            \item ($a = 0$) Note that $b \le n$, hence, $f(b) = (0, b) = 
              (a, b)$. So $(a, b) \in \Im f$.
            \item ($a = 1$) Note that $2n \ge n + b > n$, hence,
              $f(n + b) = (1, (n + b) - b) = (1, b) = (a, b)$.
              So $(a, b) \in \Im f$.
          \end{enumerate}
      \end{description}
    \end{solution}
  \exercise We say that $u, v \in \set{0, 1}^n$ are orthogonal over $\F_2$ iff
    $\sum_{i = 1}^n u_i v_i$ is even. Let $v \in \set{0, 1}^n$ be a tuple such
    that $v_i \neq 0$ for some $i \in \range{n}$. Show that if we choose a
    tuple $u \in \set{0, 1}^n$ uniformly at random, then $u$ and $v$ are
    orthogonal over $\F_2$ with probability $1 / 2$.
\end{chapterendexercises}
